let data={data:{"Name":{"0":"Study: Signature initiative","1":"Pilot project: Signature initiative","2":"Capital project: Signature initiative","3":"Capital project: Reduce fossil fuel use in fleets","4":"Pilot projects: Stormwater quality, community project","5":"Study: Stormwater quality, community project","6":"Capital project: Stormwater quality, community project","7":"Capital project: Septic wastewater systems","8":"Study: Stormwater quality, municipal project","9":"Study: Septic wastewater systems","10":"Pilot project: Stormwater quality, municipal project","11":"Capital project: Stormwater quality, municipal project","12":"Pilot project: Septic wastewater systems ","13":"Pilot project: Reduce fossil fuel use in fleets","14":"Study: Reduce fossil fuel use in fleets","15":"Pilot project: Brownfield site redevelopment","16":"Study: Brownfield site redevelopment","17":"Capital project: Retrofit of community projects","18":"Pilot project: Retrofit of community projects","19":"Study: Energy recovery or district energy","20":"Pilot project: Energy recovery or district energy","21":"Study: Retrofit of community projects","22":"Capital project: Energy recovery or district energy","23":"Capital project: Retrofit of municipal facilities","24":"Study: Wastewater systems","25":"Pilot project: Wastewater systems","26":"Capital project: Wastewater systems","27":"Pilot project: Water conservation, community project","28":"Study: Water conservation, community project","29":"Capital project: Brownfield site redevelopment","30":"Capital project: Water conservation, community project","31":"Study: Water conservation, municipal project","32":"Pilot project: Water conservation, municipal project","33":"Capital project: Water conservation, municipal project","34":"Capital project: Transportation networks and commuting options","35":"Pilot project: Transportation networks and commuting options","36":"Study: Waste diversion","37":"Pilot project: Waste diversion","38":"Capital project: Waste diversion","39":"Plan: Sustainable neighbourhood action plan","40":"Capital project: Renewable energy production on a brownfield","41":"Pilot project: Renewable energy production on a brownfield","42":"Study: Renewable energy production on a brownfield","43":"Capital project: Site remediation or risk management","44":"Pilot project: Site remediation or risk management","45":"Study: Site remediation or risk management","46":"Plan: Community brownfield action plan","47":"Study: Waste stream management","48":"Pilot project: Waste stream management","49":"Capital project: Waste stream management","50":"Pilot project: Retrofit of municipal facilities","51":"Study: Retrofit of municipal facilities","52":"Capital project: New construction of energy-efficient facilities","53":"Pilot project: New construction of energy-efficient municipal facilities","54":"Study: New construction of energy-efficient municipal facilities","55":"Study: Transportation networks and commuting options"},"Description":{"0":"Our signature initiative funding helps Canadian cities and communities of all sizes study bold environmental projects that reduce GHG emissions and protect the air, water or land.","1":"We fund highly innovative and impactful environmental pilot projects that reduce GHG emissions and protect the air, water or land. This funding is designed for transformative, best-in-class projects.","2":"We fund highly innovative and impactful environmental capital projects that reduce GHG emissions and protect the air, water or land. This funding is designed for transformative, best-in-class projects.","3":"We offer combined loan and grant funding for capital projects that reduce or avoid fossil fuel use in any vehicle that delivers municipal services. This funding helps Canadian cities and communities of all sizes undertake\u2026","4":"We fund pilot projects for initiatives that can potentially allow a community to remove 60% of total suspended solids (TSS) or a significant amount of other contaminants (e.g., E.coli, salt, grease) from its stormwater\u2026","5":"We fund feasibility studies for initiatives that can potentially allow a community to remove 60% of total suspended solids (TSS) or a significant amount of other contaminants (e.g., E.coli, salt, grease) from its stormwater\u2026","6":"We fund capital projects that allow a community to remove 60% of total suspended solids (TSS) or a significant amount of other contaminants (e.g., E.coli, salt, grease) from its stormwater runoff. This funding helps Canadian\u2026","7":"We fund capital projects that capture and treat all wastewater in a target area to at least secondary standards using septic system technologies. This funding helps Canadian cities and communities of all sizes protect local\u2026","8":"We fund feasibility studies for initiatives that can help a municipality remove 80% of total suspended solids (TSS) or a significant amount of other contaminants (e.g., E.coli, salt, grease) from a private or public site\u2019s\u2026","9":"We fund feasibility studies of initiatives that have the potential to capture and treat all wastewater in a target area to at least secondary treatment standards using septic system technologies. This funding helps Canadian\u2026","10":"We fund pilot projects for initiatives that have the potential to remove 80% of total suspended solids (TSS) or a significant amount of other contaminants (e.g., E.coli, salt, grease) from a municipal facility\u2019s stormwater\u2026","11":"We fund capital projects for initiatives that have the potential to remove 80% of total suspended solids (TSS) or a significant amount of other contaminants (e.g., E.coli, salt, grease) from a municipal facility\u2019s stormwater\u2026","12":"We fund pilot projects of initiatives that have the potential to capture and treat all wastewater in a target area to at least secondary standards using septic system technologies. This funding helps Canadian cities and\u2026","13":"We fund pilot projects that reduce or avoid fossil fuel use in any vehicle that delivers municipal services.This funding helps Canadian cities and communities of all sizes undertake environmental sustainability projects that\u2026","14":"We fund feasibility studies for projects that reduce or avoid fossil fuel use in any vehicle that delivers municipal services. This funding helps Canadian cities and communities of all sizes undertake environmental\u2026","15":"We fund pilot projects for initiatives that have potential to bring a brownfield site back into economically productive use. You can access brownfield-specific funding if your initiative will be constructed on a remediated\u2026","16":"We fund feasibility studies for initiatives that have potential to bring a brownfield site back into economically productive use. You can access brownfield-specific funding if your initiative will be constructed on a\u2026","17":"We fund capital projects for retrofits that improve energy efficiency in homes or in a group of commercial or institutional buildings. This funding helps Canadian cities and communities of all sizes use less energy, which\u2026","18":"We fund pilot projects for retrofits that improve energy efficiency in homes or in a group of commercial or institutional buildings. This funding helps Canadian cities and communities of all sizes use less energy, which\u2026","19":"We fund feasibility studies of projects that use recovered or renewable thermal energy in new or existing facilities. This funding helps Canadian cities and communities of all sizes use less energy, which reduces their\u2026","20":"We fund pilot projects that use recovered or renewable thermal energy in new or existing facilities. This funding helps Canadian cities and communities of all sizes use less energy, which reduces their greenhouse gas\u2026","21":"We fund feasibility studies of retrofits that improve energy efficiency in homes or in a group of commercial or institutional buildings. This funding helps Canadian cities and communities of all sizes use less energy, which\u2026","22":"We fund capital projects that use recovered or renewable thermal energy in new or existing facilities. This funding helps Canadian cities and communities of all sizes use less energy, which reduces their greenhouse gas\u2026","23":"We fund capital projects for retrofits that improve energy efficiency by at least 30% in municipal facilities. This funding helps Canadian cities and communities of all sizes use less energy, which reduces their greenhouse\u2026","24":"We fund feasibility studies to develop innovative wastewater treatment initiatives. This funding helps Canadian cities and communities of all sizes protect local bodies of water through improved wastewater treatment.","25":"We fund pilot projects for innovative wastewater treatment initiatives.This funding helps Canadian cities and communities of all sizes protect local bodies of water through improved wastewater treatment.","26":"We fund capital projects for innovative wastewater treatment systems. This funding helps Canadian cities and communities of all sizes protect local bodies of water through improved wastewater treatment.","27":"We fund pilot projects of retrofit initiatives that have the potential to reduce potable water use by at least 20% in a neighbourhood, facility or group of facilities. This funding helps Canadian cities and communities of\u2026","28":"We fund feasibility studies of retrofit initiatives that have the potential to reduce potable water use by at least 20% in a neighbourhood, facility or group of facilities. This funding helps Canadian cities and communities\u2026","29":"We fund capital projects for initiatives that bring a brownfield site back into economically productive use. You can access brownfield-specific funding if your initiative will be constructed on a remediated brownfield site\u2026","30":"We fund capital projects of retrofit initiatives that reduce potable water use by at least 20% in a neighbourhood, facility or group of facilities. This funding helps Canadian cities and communities of all sizes promote\u2026","31":"We fund feasibility studies of retrofit initiatives that have the potential to reduce a municipal building\u2019s potable water use by at least 40%. This funding helps Canadian cities and communities of all sizes promote water\u2026","32":"We fund pilot projects for retrofit initiatives that have the potential to reduce a municipal building\u2019s potable water use by at least 40%. This funding helps Canadian cities and communities of all sizes promote water\u2026","33":"We fund capital projects for retrofit initiatives that reduce a municipal building\u2019s potable water use by at least 40%. This funding helps Canadian cities and communities of all sizes promote water conservation.","34":"We offer combined loan and grant funding for capital projects that reduce pollution in Canadian communities by improving transportation systems and networks or encouraging people to switch to less polluting transportation\u2026","35":"We fund pilot projects that reduce pollution in Canadian communities by improving transportation systems and networks or encouraging people to switch to less polluting transportation options. This funding helps Canadian\u2026","36":"We fund feasibility studies for initiatives that have the potential to help you divert at least 60% of municipal solid waste from your landfill, no matter how much you\u2019re already diverting (i.e., 0-59%). If your municipality\u2026","37":"We fund pilot projects for initiatives that have the potential to help you divert at least 60% of municipal solid waste from your landfill, no matter how much you\u2019re already diverting (i.e., 0-59%). If your municipality has\u2026","38":"We fund capital projects for initiatives that divert at least 60% of municipal solid waste from your landfill, no matter how much you\u2019re already diverting (i.e., 0-59%). If your municipality has already achieved the 60%\u2026","39":"We will fund the creation of plans to develop sustainable, green initiatives in your neighbourhood. This funding helps Canadian cities and communities of all sizes reduce their greenhouse gas emissions (GHGs) and improve\u2026","40":"We fund capital projects for initiatives that generate renewable energy on a brownfield site, with or without its remediation. This funding helps Canadian cities and communities of all sizes use brownfield sites to create\u2026","41":"We fund pilot projects for initiatives that generate renewable energy on a brownfield site, with or without its remediation. This funding helps Canadian cities and communities of all sizes use brownfield sites to create\u2026","42":"We fund feasibility studies of initiatives that generate renewable energy on a brownfield site, with or without its remediation. This funding helps Canadian cities and communities of all sizes use brownfield sites to create\u2026","43":"We fund capital projects for initiatives that bring a brownfield site back into economically productive use. This funding helps Canadian cities and communities of all sizes remediate their brownfield sites.","44":"We fund pilot projects for initiatives that demonstrate how to bring a brownfield site back into economically productive use. This funding helps Canadian cities and communities of all sizes remediate their brownfield sites.","45":"We fund feasibility studies of initiatives that have the potential to bring a brownfield site back into economically productive use. This funding helps Canadian cities and communities of all sizes remediate their brownfield\u2026","46":"We will fund the creation of a plan that identifies and prioritizes opportunities to revitalize your community\u2019s brownfields. This funding helps Canadian cities and communities of all sizes plan to remediate and rehabilitate\u2026","47":"We fund feasibility studies of initiatives that address specific waste stream challenges (e.g., biosolids, diapers, polystyrene, certain plastics, other substances). This funding helps Canadian cities and communities of all\u2026","48":"We fund pilot projects for initiatives that address specific waste stream challenges (e.g., biosolids, diapers, polystyrene, certain plastics, other substances). This funding helps Canadian cities and communities of all\u2026","49":"We fund capital projects for initiatives that address specific waste stream challenges (e.g., biosolids, diapers, polystyrene, plastics, other substances). This funding helps Canadian cities and communities of all sizes\u2026","50":"We fund pilot projects of retrofits that improve energy efficiency by at least 30% in municipal facilities. This funding helps Canadian cities and communities of all sizes use less energy, which reduces their greenhouse gas\u2026","51":"We fund feasibility studies of retrofits that improve energy efficiency by at least 30% in municipal facilities. This funding helps Canadian cities and communities of all sizes use less energy, which reduces their greenhouse\u2026","52":"We fund capital projects of initiatives that target net zero energy performance in new municipal facilities. This funding helps Canadian cities and communities of all sizes use less energy, which reduces their greenhouse gas\u2026","53":"We fund pilot projects of initiatives that target net zero energy performance in new municipal facilities. This funding helps Canadian cities and communities of all sizes use less energy, which reduces their greenhouse gas\u2026","54":"We fund feasibility studies of initiatives that target net zero energy performance in new municipal facilities. This funding helps Canadian cities and communities of all sizes use less energy, which reduces their greenhouse\u2026","55":"We fund feasibility studies of initiatives that may reduce pollution in Canadian communities by improving transportation systems and networks or encouraging people to switch to less polluting transportation options. This\u2026"},"Link":{"0":"https:\/\/fcm.ca\/en\/funding\/gmf\/study-signature-initiative","1":"https:\/\/fcm.ca\/en\/funding\/gmf\/pilot-project-signature-initiative","2":"https:\/\/fcm.ca\/en\/funding\/gmf\/capital-project-signature-initiative","3":"https:\/\/fcm.ca\/en\/funding\/gmf\/capital-project-reduce-fossil-fuel-use-fleets","4":"https:\/\/fcm.ca\/en\/funding\/gmf\/pilot-projects-stormwater-quality-community-project","5":"https:\/\/fcm.ca\/en\/funding\/gmf\/study-stormwater-quality-community-project","6":"https:\/\/fcm.ca\/en\/funding\/gmf\/capital-project-stormwater-quality-community-project","7":"https:\/\/fcm.ca\/en\/funding\/gmf\/capital-project-septic-wastewater-systems","8":"https:\/\/fcm.ca\/en\/funding\/gmf\/study-stormwater-quality-municipal-project","9":"https:\/\/fcm.ca\/en\/funding\/gmf\/study-septic-wastewater-systems","10":"https:\/\/fcm.ca\/en\/funding\/gmf\/pilot-project-stormwater-quality-municipal-project","11":"https:\/\/fcm.ca\/en\/funding\/gmf\/capital-project-stormwater-quality-municipal-project","12":"https:\/\/fcm.ca\/en\/funding\/gmf\/pilot-project-septic-wastewater-systems","13":"https:\/\/fcm.ca\/en\/funding\/gmf\/pilot-project-reduce-fossil-fuel-use-in-fleets","14":"https:\/\/fcm.ca\/en\/funding\/gmf\/study-reduce-fossil-fuel-use-fleets","15":"https:\/\/fcm.ca\/en\/funding\/gmf\/pilot-project-brownfield-site-redevelopment","16":"https:\/\/fcm.ca\/en\/funding\/gmf\/study-brownfield-site-redevelopment","17":"https:\/\/fcm.ca\/en\/funding\/gmf\/capital-project-retrofit-community-projects","18":"https:\/\/fcm.ca\/en\/funding\/gmf\/pilot-project-retrofit-community-projects","19":"https:\/\/fcm.ca\/en\/funding\/gmf\/study-energy-recovery-district-energy","20":"https:\/\/fcm.ca\/en\/funding\/gmf\/pilot-project-energy-recovery-district-energy","21":"https:\/\/fcm.ca\/en\/funding\/gmf\/study-retrofit-community-projects","22":"https:\/\/fcm.ca\/en\/funding\/gmf\/capital-project-energy-recovery-district-energy","23":"https:\/\/fcm.ca\/en\/funding\/capital-project-retrofit-municipal-facilities","24":"https:\/\/fcm.ca\/en\/funding\/gmf\/study-wastewater-systems","25":"https:\/\/fcm.ca\/en\/funding\/gmf\/pilot-project-wastewater-systems","26":"https:\/\/fcm.ca\/en\/funding\/gmf\/capital-project-wastewater-systems","27":"https:\/\/fcm.ca\/en\/funding\/gmf\/pilot-project-water-conservation-community-project","28":"https:\/\/fcm.ca\/en\/funding\/gmf\/study-water-conservation-community-project","29":"https:\/\/fcm.ca\/en\/funding\/gmf\/capital-project-brownfield-redevelopment","30":"https:\/\/fcm.ca\/en\/funding\/gmf\/capital-project-water-conservation-community-project","31":"https:\/\/fcm.ca\/en\/funding\/gmf\/study-water-conservation-municipal-project","32":"https:\/\/fcm.ca\/en\/funding\/gmf\/pilot-project-water-conservation-municipal-project","33":"https:\/\/fcm.ca\/en\/funding\/gmf\/capital-project-water-conservation-municipal-project","34":"https:\/\/fcm.ca\/en\/funding\/gmf\/capital-project-transportation-networks-commuting-options","35":"https:\/\/fcm.ca\/en\/funding\/gmf\/pilot-project-transportation-networks-commuting-options","36":"https:\/\/fcm.ca\/en\/funding\/gmf\/study-waste-diversion","37":"https:\/\/fcm.ca\/en\/funding\/gmf\/pilot-project-waste-diversion","38":"https:\/\/fcm.ca\/en\/funding\/gmf\/capital-project-waste-diversion","39":"https:\/\/fcm.ca\/en\/funding\/gmf\/plan-sustainable-neighbourhood-action-plan","40":"https:\/\/fcm.ca\/en\/funding\/gmf\/capital-project-renewable-energy-production-brownfield","41":"https:\/\/fcm.ca\/en\/funding\/gmf\/pilot-project-renewable-energy-production-brownfield","42":"https:\/\/fcm.ca\/en\/funding\/gmf\/study-renewable-energy-production-brownfield","43":"https:\/\/fcm.ca\/en\/funding\/gmf\/capital-project-site-remediation-or-risk-management","44":"https:\/\/fcm.ca\/en\/funding\/gmf\/pilot-project-site-remediation-or-risk-management","45":"https:\/\/fcm.ca\/en\/funding\/gmf\/study-site-remediation-or-risk-management","46":"https:\/\/fcm.ca\/en\/funding\/gmf\/plan-community-brownfield-action-plan","47":"https:\/\/fcm.ca\/en\/funding\/gmf\/study-waste-stream-management","48":"https:\/\/fcm.ca\/en\/funding\/gmf\/pilot-project-waste-stream-management","49":"https:\/\/fcm.ca\/en\/funding\/gmf\/capital-project-waste-stream-management","50":"https:\/\/fcm.ca\/en\/funding\/gmf\/pilot-project-retrofit-municipal-facilities","51":"https:\/\/fcm.ca\/en\/funding\/gmf\/study-retrofit-municipal-facilities","52":"https:\/\/fcm.ca\/en\/funding\/gmf\/capital-project-new-construction-energy-efficient-facilities","53":"https:\/\/fcm.ca\/en\/funding\/gmf\/pilot-project-new-construction-energy-efficient-municipal-facilities","54":"https:\/\/fcm.ca\/en\/funding\/gmf\/study-new-construction-energy-efficient-municipal-facilities","55":"https:\/\/fcm.ca\/en\/funding\/gmf\/study-transportation-networks-commuting-options"},"Tags":{"0":"Planning,Transportation,Waste,Water,Brownfields,Energy","1":"Planning,Transportation,Waste,Water,Brownfields,Energy","2":"Planning,Transportation,Waste,Water,Brownfields,Energy","3":"Transportation","4":"Water","5":"Water","6":"Water","7":"Water","8":"Water","9":"Water","10":"Water","11":"Water","12":"Water","13":"Transportation","14":"Transportation","15":"Brownfields","16":"Brownfields","17":"Energy","18":"Energy","19":"Energy","20":"Energy","21":"Energy","22":"Energy","23":"Energy","24":"Water","25":"Water","26":"Water","27":"Water","28":"Water","29":"Brownfields","30":"Water","31":"Water","32":"Water","33":"Water","34":"Transportation","35":"Transportation","36":"Waste","37":"Waste","38":"Waste","39":"Planning","40":"Brownfields","41":"Brownfields","42":"Brownfields","43":"Brownfields","44":"Brownfields","45":"Brownfields","46":"Brownfields","47":"Waste","48":"Waste","49":"Waste","50":"Energy","51":"Energy","52":"Energy","53":"Energy","54":"Energy","55":"Transportation"}}};
let actualData=[]
var TODAY = new Date().toJSON().slice(0, 10);
var APPLIED = false;
//takes in jsonFake variable and returns soemthing like wanted variable

        for(let keys in data.data){
            let thisData=data.data[keys]
            for(let Idees=0;Idees<Object.keys(thisData).length;Idees++){
                if(actualData.length<Idees+1){
                    actualData.push({id:Idees,Name:thisData[Idees],Date:TODAY, Applied:APPLIED})
                }else{
                    actualData[Idees][keys]=thisData[Idees];
                }
            }
        }

    




//Table Formatting:
var ROWS_PER_PAGE = 20;
var LAYOUT = "fitDataFill";

//Formatter parameters:
var LINK_FORMAT = { label: "LINK", target: "" };
var EMAIL_FORMAT = { urlPrefix: "mailto:" };
var MONEY_FORMAT = { symbol: "$" };

//DEFUALT data:


var personal_columns = [
    { title: "Name", width:200,field: "Name", editable:true},
    { title: "Description", width:200,field: "Description", align: "left", sorter: "number", formatter: "money", formatterParams: MONEY_FORMAT, editable: true },
    { title: "Website", field: "Link", editable: true, formatter: "link", formatterParams: LINK_FORMAT },
    { title: "Tags",width:200, field: "Tags" },
    { title: "Applied", field: "Applied", sorter: "boolean", formatter: "tickCross" },
    { title: "Date Created", field: "Date", sorter: "date", editable: true }
    ];


    var availableFunding =
    new Tabulator("#funding-table", {
        data: actualData, //load row data from array
        layout: LAYOUT, //fit columns to width of table
        responsiveLayout: "hide", //hide columns that dont fit on the table
        tooltips: true, //show tool tips on cells
        addRowPos: "top", //when adding a new row, add it to the top of the table
        history: true, //allow undo and redo actions on the table
        // pagination: "local", //paginate the data
        // paginationSize: ROWS_PER_PAGE, //allow 7 rows per page of data
        movableColumns: true, //allow column order to be changed
        resizableRows: true, //allow row order to be changed
        initialSort: [ //set the initial sort order of the data
            { column: "Name", dir: "asc" },
        ],
        columns: personal_columns, //define the table columns
    });

//Trigger setFilter function with correct parameters
function updateFilter(){
    var filter = $("#filter-field").val() == "function" ? customFilter : $("#filter-field").val();

    if($("#filter-field").val() == "function" ){
        $("#filter-value").prop("disabled", true);
    }else{
        $("#filter-value").prop("disabled", false);
    }

    availableFunding.setFilter(filter, "like", $("#filter-value").val());
}

//Update filters on value change
$("#filter-field").change(updateFilter);
$("#filter-value").keyup(updateFilter);

//trigger download of data.csv file
$("#download-csv").click(function(){
    availableFunding.download("csv", "data.csv");
});

//trigger download of data.json file
$("#download-json").click(function(){
    availableFunding.download("json", "data.json");
});

//trigger download of data.pdf file
$("#download-pdf").click(function(){
    availableFunding.download("pdf", "data.pdf", {
        orientation:"portrait", //set page orientation to portrait
        title:"Example Report", //add title to report
    });
});

//Clear filters on "Clear Filters" button click
$("#filter-clear").click(function(){
    availableFunding.clearFilter();
});
